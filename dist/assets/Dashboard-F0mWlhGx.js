import{r as n,a as N,c as p,j as e,i as w,h as S,P as E,F as C,d as I,Q as U,V as X,W as $,X as Y,Y as D}from"./index-DnpDLM2k.js";import W from"./LeaderboardPanel-S683E8xz.js";import{B as _}from"./BuyForm-CYARyDKy.js";import{u as v}from"./useWeb3Functions-CEv1IrDl.js";import"./createPublicClient-C1riEoQb.js";import"./isAddressEqual-k2mYNk9N.js";import"./secp256k1-DJrMk0vv.js";const H=()=>{const[r,t]=n.useState([]),{fetchUserPurchases:l}=v(),{address:h}=N(),m=p(s=>s.presale.chainId);n.useEffect(()=>{(async()=>{const s=await l();t(s.slice(-5).reverse())})()},[l]);const x=s=>!s||isNaN(Number(s))?"0":Number(S(s,w.saleToken[m].decimals)).toLocaleString(),d=s=>new Date(Number(s)*1e3).toLocaleDateString();return e.jsxs("div",{className:"rounded-xl bg-black/30 backdrop-blur-md border border-white/10 p-6 text-white h-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Your Last Transactions"}),r.length===0||r.every(s=>s.amount===0n)?e.jsx("p",{className:"text-center text-gray-400 mt-12",children:"There are no finalized transactions yet…"}):e.jsx("div",{className:"space-y-4",children:r.map((s,i)=>e.jsxs("div",{className:"bg-[#131b2b] border border-[#1f2b3c] rounded-lg p-4",children:[e.jsxs("div",{className:"text-sm text-gray-300 mb-1",children:["Purchased:"," ",e.jsxs("span",{className:"font-bold text-white",children:[x(s.amount)," BCX"]})]}),e.jsxs("div",{className:"text-sm text-gray-300 mb-1",children:["Paid:"," ",e.jsx("span",{className:"font-bold text-white",children:x(s.paidAmount)})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Date: ",d(s.timestamp)]}),s.txHash&&e.jsx("div",{className:"text-sm text-yellow-400 mt-1",children:e.jsx("a",{href:`${w.blockExplorerUrl[m]}/tx/${s.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"View Transaction →"})})]},i))})]})};function B(r,t=4){return`${r.slice(0,t+2)}...${r.slice(-t)}`}const O=()=>{const{fetchReferralStats:r}=v(),{address:t}=N(),[l,h]=n.useState({referredCount:0,totalEarnings:"0",referredAddresses:[],bcxBoughtByEach:[]}),[m,x]=n.useState(!1),[d,s]=n.useState(!1),i=t?`https://token.buycex.com/?ref=${t}`:"Connect your wallet",f=t||"";n.useEffect(()=>{t&&(s(!0),r().then(o=>{o&&h({referredCount:o.referredCount,totalEarnings:o.totalEarnings,referredAddresses:o.referredAddresses,bcxBoughtByEach:o.bcxBoughtByEach})}).finally(()=>s(!1)))},[t]);const j=()=>{!i||i==="Connect your wallet"||(navigator.clipboard.writeText(i),x(!0),setTimeout(()=>x(!1),2e3))};return e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-black/40 backdrop-blur-md border border-white/10 p-6 text-white h-full",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-40",children:[e.jsx("div",{className:"absolute -top-24 -left-24 h-64 w-64 rounded-full bg-yellow-400/20 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-white/10 blur-3xl"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Referrals"}),!!t&&e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs text-white/70",children:[e.jsx(E,{className:"text-yellow-300"}),"Invite friends, earn BCX"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-6 uppercase tracking-wider",children:"All of your referrals appear here"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"group relative overflow-hidden rounded-xl border border-white/10 bg-gradient-to-br from-white/5 to-transparent px-5 py-4",children:[e.jsx("div",{className:"absolute -top-8 -right-8 h-24 w-24 rounded-full bg-yellow-300/10 blur-2xl group-hover:bg-yellow-300/20 transition-colors"}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-lg bg-yellow-400/20 text-yellow-300",children:e.jsx(C,{})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm text-white/70",children:"Your Referrals"}),e.jsx("div",{className:"text-xl font-bold text-white/90",children:d?e.jsx("span",{className:"inline-block h-5 w-20 animate-pulse rounded bg-white/10"}):l.referredCount})]})]})})]}),e.jsxs("div",{className:"group relative overflow-hidden rounded-xl border border-white/10 bg-gradient-to-br from-white/5 to-transparent px-5 py-4",children:[e.jsx("div",{className:"absolute -bottom-10 -left-10 h-24 w-24 rounded-full bg-emerald-400/10 blur-2xl group-hover:bg-emerald-400/20 transition-colors"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-lg bg-emerald-400/20 text-emerald-300",children:e.jsx(I,{})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm text-white/70",children:"Referral Earnings"}),e.jsx("div",{className:"text-xl font-bold text-white/90",children:d?e.jsx("span",{className:"inline-block h-5 w-24 animate-pulse rounded bg-white/10"}):e.jsxs(e.Fragment,{children:[l.totalEarnings," ",e.jsx("span",{className:"text-sm font-medium text-white/60",children:"BCX"})]})})]})]})})]})]}),e.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-yellow-400/30 bg-gradient-to-r from-yellow-400/15 via-yellow-200/10 to-transparent p-4 mb-5",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-yellow-300",children:[e.jsx(U,{}),e.jsx("span",{className:"text-sm font-medium",children:"Your unique referral link"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{readOnly:!0,value:i,className:"w-full truncate rounded-lg border border-yellow-400/20 bg-black/40 px-3 py-2 text-sm text-yellow-200 placeholder:text-yellow-200/50 focus:outline-none focus:ring-2 focus:ring-yellow-400/40"})}),t&&e.jsxs("button",{onClick:j,className:"inline-flex items-center justify-center gap-2 rounded-lg bg-yellow-400/90 px-4 py-2 text-sm font-semibold text-black transition hover:bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-yellow-400/40",children:[e.jsx(X,{})," ",m?"Copied":"Copy Link"]})]}),t&&e.jsx("div",{className:"mt-3 text-xs text-yellow-200/80",children:"Share your link and earn a commission when your referrals buy BCX."})]}),t&&e.jsxs("div",{className:"mb-6 inline-flex items-center gap-2 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs text-gray-300",children:[e.jsx("span",{className:"text-white/60",children:"Your Referral ID:"}),e.jsx("code",{className:"rounded bg-white/10 px-2 py-1 font-mono text-yellow-300",children:B(f)})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-white/90",children:"Referred Users"}),!d&&l.referredAddresses.length>0&&e.jsxs("span",{className:"text-xs text-white/60",children:[l.referredAddresses.length," total"]})]}),d&&e.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((o,u)=>e.jsxs("div",{className:"flex justify-between border border-white/5 bg-white/5 rounded-md py-2 px-3",children:[e.jsx("span",{className:"h-4 w-32 animate-pulse rounded bg-white/10"}),e.jsx("span",{className:"h-4 w-16 animate-pulse rounded bg-white/10"})]},u))}),!d&&l.referredAddresses.length===0&&e.jsxs("div",{className:"grid place-items-center rounded-xl border border-white/10 bg-white/5 py-10 text-center",children:[e.jsx("div",{className:"mb-3 grid h-12 w-12 place-items-center rounded-full bg-white/10 text-white/70",children:e.jsx(C,{})}),e.jsx("div",{className:"text-white/80 font-medium",children:"No referrals yet"}),e.jsx("div",{className:"mt-1 text-xs text-white/60 max-w-xs",children:"Share your link above to start earning rewards when your friends buy BCX."})]}),!d&&l.referredAddresses.length>0&&e.jsxs("div",{className:"overflow-hidden rounded-xl border border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_auto] bg-white/5 px-3 py-2 text-[11px] uppercase tracking-wider text-white/60",children:[e.jsx("div",{children:"User"}),e.jsx("div",{className:"text-right",children:"BCX Bought"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto divide-y divide-white/10",children:l.referredAddresses.map((o,u)=>e.jsxs("div",{className:"flex items-center justify-between bg-black/20 px-3 py-2 hover:bg-white/5",children:[e.jsx("span",{className:"truncate text-xs text-white/80",children:B(o)}),e.jsxs("span",{className:"font-mono text-xs text-yellow-300",children:[l.bcxBoughtByEach[u]," BCX"]})]},o))})]})]})]})]})},Z=()=>{const{address:r}=N(),t=r?`${r.slice(0,6)}...${r.slice(-4)}`:"Not connected",h=p(a=>a.wallet.balances).BCX||0,m=p(a=>a.presale.prices),x=p(a=>a.presale.chainId),d=m[w.displayPrice[x]]||1,s=h*d,{fetchLeaderboardFromAllPurchases:i}=v(),[f,j]=n.useState(1),[o,u]=n.useState(null),[V,L]=n.useState(0n),[y,A]=n.useState(0);n.useEffect(()=>{(async()=>{const a=await i(),b=a.findIndex(c=>c.address.toLowerCase()===r?.toLowerCase());if(b>=0){const c=a[b];u(b+1),j(c.level),L(c.total);const g=T(c.level,c.total);A(g)}})()},[r,i]);const T=(a,b)=>{const c={1:1000n*10n**18n,4:10000n*10n**18n,5:50000n*10n**18n,6:100000n*10n**18n,7:150000n*10n**18n,8:200000n*10n**18n},g=b,k=Object.entries(c).find(([R])=>parseInt(R)===a-1)?.[1]||0n,F=c[a]||g,P=(g-k)*100n/(F-k||1n);return Number(P)};return e.jsxs("div",{className:"p-6 text-white",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Welcome to Your Dashboard!"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"rounded-xl bg-black/30 backdrop-blur-md border border-white/10 p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300",children:"Your Total BCX Balance"}),e.jsx("h2",{className:"text-2xl font-bold mt-2",children:Intl.NumberFormat().format(h)})]}),e.jsx("div",{className:"text-yellow-400 text-3xl",children:e.jsx($,{})})]}),e.jsxs("div",{className:"rounded-xl bg-black/30 backdrop-blur-md border border-white/10 p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300",children:"Your Tokens Worth at Launch"}),e.jsxs("h2",{className:"text-2xl font-bold mt-2",children:["$",Intl.NumberFormat().format(s)]})]}),e.jsx("div",{className:"text-yellow-400 text-3xl",children:e.jsx(Y,{})})]}),e.jsxs("div",{className:"rounded-xl bg-black/30 backdrop-blur-md border border-white/10 p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300",children:"Receiving Wallet Address"}),e.jsx("h2",{className:"text-lg font-semibold mt-2",children:t})]}),e.jsx("div",{className:"text-yellow-400 text-3xl",children:e.jsx(D,{})})]})]}),e.jsxs("div",{className:"rounded-xl bg-black/30 backdrop-blur-md border border-white/10 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300",children:"Current Rank"}),e.jsxs("h2",{className:"text-xl font-semibold",children:["Level ",f]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-yellow-400 text-sm",children:[y.toFixed(2),"%"]})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-300",children:"Next Rank"}),e.jsxs("h2",{className:"text-xl font-semibold",children:["Level ",f+1]})]})]}),e.jsx("div",{className:"w-full bg-white/10 h-3 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-yellow-400 h-3 rounded-full transition-all duration-500",style:{width:`${y}%`}})})]}),e.jsxs("div",{className:"py-8 grid grid-cols-1 lg:grid-cols-2 gap-6 text-white bg-black min-h-screen",children:[e.jsxs("div",{className:"rounded-xl bg-black/30 backdrop-blur-lg border-0 sm:border border-white/10 p-0 md:p-6 h-full flex flex-col",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Presale Buy Now"}),e.jsx("div",{className:"mt-4",children:e.jsx(_,{})})]}),e.jsx(W,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[e.jsx(H,{}),e.jsx(O,{})]})]})};export{Z as default};
